<?xml version="1.0" encoding="UTF-8"?><record_update table="sp_widget">
    <sp_widget action="INSERT_OR_UPDATE">
        <category>custom</category>
        <client_script><![CDATA[function($scope, $rootScope, $timeout, categorySubscribe) {
	var c = this;
	c.is_ie = navigator.userAgent.indexOf("MSIE ") > -1 || navigator.userAgent.indexOf("Trident/") > -1; 

	$scope.showWidget = "";
	c.disableControl = false;

	// Esperando o evento "showHideWidget" acontecer no GService Icon Link
	$rootScope.$on('showHideWidget', function(event,data) {

		$('.content-category-items').css('display', 'block');

		if(data == "service"){
			c.data.showWidget = true;
			if(!categorySubscribe.getItemID()){
				if(c.data.title == "Produtos Digitais"){
					$("html, body").stop();
					$timeout(function(){
						$('html,body').animate({scrollTop: $("#widget-category-items").offset().top},'slow');
					});
					$(window).bind("mousewheel", function() {
						$("html, body").stop();
					});
				}
			}
		}
		else{
			c.data.showWidget = false;
			$rootScope.$broadcast("hideCategory", true);
		}
	});

	// Comunicando com o widget GService Categories para enviar o SysID da categoria selecionada
	$scope.selectedCategory = function(selection){
		c.selectedCategory = selection;
		categorySubscribe.setCategoryID(selection);
	};

	c.back = function(){
		if(!c.disableControl){
			for(var i in c.data.slides){
				c.change_z_index(i, 50);
				c.data.slides[i].position++;
				if(c.data.slides[i].position > c.data.slides.length - 1){
					c.change_z_index(i, 0);
					c.data.slides[i].position = 0;
				}
				var newLeft = c.data.left * c.data.slides[i].position;
				c.makeTransition(i, newLeft);
			}
			c.disableControl = true;
			$timeout(function(){
				c.disableControl = false;
			}, 500);
		}
	}

	c.next = function(){
		if(!c.disableControl){
			for(var i in c.data.slides){
				c.change_z_index(i, 50);
				c.data.slides[i].position--;
				if(c.data.slides[i].position < 0){
					c.change_z_index(i, 0);
					c.data.slides[i].position = c.data.slides.length -1;
				}
				var newLeft = c.data.left * c.data.slides[i].position;
				c.makeTransition(i, newLeft);
			}
			c.disableControl = true;
			$timeout(function(){
				c.disableControl = false;
			}, 500);
		}
	}
	
	function changeItemNumber(x) {
		if (x.matches) {
			if(c.data.items_number != c.data.original_number){
				c.data.items_number = c.data.original_number;
				preparePosition();
			}
		} else {
			//c.data.items_number = Math.floor(c.data.original_number / 2);
			c.data.items_number = 1;
			preparePosition();
		}
	}

	function preparePosition(){
		c.data.left = 100 / c.data.items_number;
		for(var i in c.data.slides){
			c.data.slides[i].left = c.data.slides[i].position * c.data.left;
		}
	}

	/*
	var x = window.matchMedia("(min-width: 992px)")
	changeItemNumber(x) // Call listener function at run time
	x.addListener(changeItemNumber) // Attach listener function on state changes
	*/

}]]></client_script>
        <controller_as>c</controller_as>
        <css>.center {&#13;
  display: flex;&#13;
  align-items: center;&#13;
  justify-content: center;&#13;
}&#13;
&#13;
.category-title {&#13;
  text-align: center;&#13;
  padding-bottom: 30px;&#13;
  font-size: 24px;&#13;
  font-family: $text-bold;&#13;
  color: $deep-sky-blue;&#13;
  background-color: white;&#13;
  text-transform: uppercase;&#13;
}&#13;
&#13;
.content {&#13;
  background-color: white;&#13;
  position: relative;&#13;
  padding-bottom: 50px;&#13;
&#13;
  .control {&#13;
    font-family: $text-bold;&#13;
    position: absolute;&#13;
    top: 40px;&#13;
    z-index: 200;&#13;
    width: 100% !important;&#13;
&#13;
    .back, .next {&#13;
      transition: .2s ease-in-out;&#13;
      position: absolute;&#13;
      width: 70px;&#13;
      height: 70px;&#13;
&#13;
      &amp;:hover {opacity: .75;}&#13;
      img {height: 70px;}&#13;
    }&#13;
    .back {left: 40px;}&#13;
    .next {right: 40px;}&#13;
  }&#13;
&#13;
  .slide_content_mask {&#13;
    overflow: hidden;&#13;
    height: 390px;&#13;
    width: 84%;&#13;
&#13;
    .slide_content {&#13;
      display: flex;&#13;
      position: relative;&#13;
    }&#13;
  }&#13;
&#13;
  .item {&#13;
    transition: .5s ease-in-out;&#13;
    position: absolute;&#13;
    background-color: white;&#13;
    padding: 0 12px;&#13;
    min-height: 310px;&#13;
&#13;
    &amp;:hover {&#13;
&#13;
      img {&#13;
        transform: scale(1.1);&#13;
        -webkit-transform: scale(1.1);&#13;
        -ms-transform: scale(1.1);&#13;
        -moz-transform: scale(1.1);&#13;
        -o-transform: scale(1.1);&#13;
      }&#13;
      .title {&#13;
        transform: translateY(-5px);&#13;
        -webkit-transform: translateY(-5px);&#13;
        -ms-transform: translateY(-5px);&#13;
        -moz-transform: translateY(-5px);&#13;
        -o-transform: translateY(-5px);&#13;
      }&#13;
    }&#13;
&#13;
    .item_ {&#13;
      text-align: center;&#13;
    }&#13;
&#13;
    img {&#13;
      transition: .3s ease-in-out;&#13;
      height: 80px;&#13;
      margin-bottom: 15px;&#13;
    }&#13;
    .title {&#13;
      transition: .3s ease-in-out;&#13;
      font-size: 17px;&#13;
      line-height: 1.2;&#13;
      font-family: $text-bolder;&#13;
      text-transform: uppercase;&#13;
      margin-bottom: 10px;&#13;
      padding: 0 12px;&#13;
    }&#13;
    .description {&#13;
      font-size: 14px;&#13;
      font-family: $text-bold;&#13;
      line-height: 1.2;&#13;
      min-height: 230px;&#13;
    }&#13;
  }&#13;
  .item:nth-child(3) {&#13;
    padding: 0;&#13;
&#13;
    .title {&#13;
      padding: 0;&#13;
      max-width: 188px;&#13;
      margin: 0 auto;&#13;
      margin-bottom: 10px;&#13;
    }&#13;
    .description {&#13;
      padding: 0 12px;&#13;
    }&#13;
  }&#13;
&#13;
}&#13;
&#13;
@media only screen and (max-width: 992px){&#13;
  .content{&#13;
    .slide_content{&#13;
      display: flex;&#13;
      flex-direction: column;&#13;
      .item{&#13;
        width: 100%!important;&#13;
        left: 0px !important;&#13;
        flex-shrink: 0;&#13;
        position: relative;&#13;
        min-height: 0px;&#13;
        .description{&#13;
          min-height: 0px;&#13;
        }&#13;
      }&#13;
    }&#13;
    .slide_content_mask {&#13;
      overflow: visible;&#13;
      height: auto;&#13;
    }&#13;
  }&#13;
}&#13;
&#13;
@media only screen and (max-width: 768px){&#13;
  &#13;
  .category-title{&#13;
    padding-left: 10px;&#13;
    padding-right: 10px;&#13;
  }&#13;
  &#13;
  .content{&#13;
    .slide_content_mask {&#13;
      width: 100%;&#13;
    }&#13;
    .slide_content{&#13;
      display: flex;&#13;
      flex-direction: row;&#13;
      max-width: 99%;&#13;
      overflow: auto;&#13;
      padding-left: 20px;&#13;
      .item{&#13;
        width: 33vw!important;&#13;
        min-width: 180px;&#13;
        left: 0px !important;&#13;
        flex-shrink: 0;&#13;
        position: relative;&#13;
        min-height: 0px;&#13;
        background: #f8f8f8;&#13;
        margin: 5px;&#13;
        padding: 15px;&#13;
        .description{&#13;
          display: none;&#13;
        }&#13;
      }&#13;
      .end-space{&#13;
        padding: 10px;&#13;
      }&#13;
    }&#13;
&#13;
  }&#13;
  /* IE */&#13;
  .content_ie {&#13;
    padding: 0 90px;&#13;
&#13;
    .category_items {&#13;
      display: flex;&#13;
&#13;
      .categories {&#13;
        text-align: center;&#13;
        padding-bottom: 30px;&#13;
&#13;
        img {&#13;
          transition: .3s ease-in-out;&#13;
          display: block;&#13;
          margin: 30px auto;&#13;
          height: 80px;&#13;
        }&#13;
        .title {&#13;
          transition: .3s ease-in-out;&#13;
          font-size: 16px;&#13;
          line-height: 1.2;&#13;
          font-family: globorounded_bk, globorounded_bk_ie;&#13;
          text-transform: uppercase;&#13;
          margin-bottom: 10px;&#13;
          padding: 0 12px;&#13;
        }&#13;
        .description {&#13;
          font-size: 12px;&#13;
          padding: 0 10px;&#13;
          font-family: globorounded_bd, globorounded_bd_ie;&#13;
          line-height: 1.2;&#13;
          min-height: 230px;&#13;
        }&#13;
&#13;
        &amp;:hover {&#13;
&#13;
          img {&#13;
            transform: scale(1.1);&#13;
            -webkit-transform: scale(1.1);&#13;
            -ms-transform: scale(1.1);&#13;
            -moz-transform: scale(1.1);&#13;
            -o-transform: scale(1.1);&#13;
          }&#13;
          .title {&#13;
            transform: translateY(-10px);&#13;
            -webkit-transform: translateY(-10px);&#13;
            -ms-transform: translateY(-10px);&#13;
            -moz-transform: translateY(-10px);&#13;
            -o-transform: translateY(-10px);&#13;
          }&#13;
        }&#13;
      }&#13;
    }&#13;
  }</css>
        <data_table>sp_instance</data_table>
        <demo_data/>
        <description/>
        <docs/>
        <field_list/>
        <has_preview>true</has_preview>
        <id>gservice_category_items_csc</id>
        <internal>false</internal>
        <link><![CDATA[function link(scope, element, attrs, controller) {
	controller.makeTransition = function(position, newLeft){
		var slide = element.find('#slide' + position);
		slide.css('left', newLeft + '%');
	}
	controller.change_z_index = function(position, z_index){
		var slide = element.find('#slide' + position);
		slide.css('z-index', z_index);
	}
}]]></link>
        <name>GService Category Items CSC</name>
        <option_schema>[{"displayValue":"Category","hint":"Selecione a categoria que deseja exibir","name":"selected_category","display_value_list":[],"section":"Data","label":"Category","type":"glide_list","value":"sc_category","ed":{"reference":"sc_category"}},{"name":"items_number","section":"Behavior","default_value":"5","label":"Items Number","type":"integer"}]</option_schema>
        <public>false</public>
        <roles/>
        <script><![CDATA[(function() {
	var portalUtils = new global.OCLPortalUtilsCSC();
	var localInput = input;
	
	if(!localInput){
		var categoriesID = options.selected_category.split(",");
		data.slides = portalUtils.getSelectableCategories(categoriesID);
		data.items_number = data.slides.length >= options.items_number ? options.items_number : data.slides.length - 1;
		data.show_carousel = data.items_number == data.slides.length ? false : true;
		data.original_number = data.items_number;
		data.left = 100 / data.items_number;
		for(var i in data.slides){
			data.slides[i].position = i;
			data.slides[i].left = i * data.left;
		}
	}
})();]]></script>
        <servicenow>false</servicenow>
        <sys_class_name>sp_widget</sys_class_name>
        <sys_created_by>organize.fernando</sys_created_by>
        <sys_created_on>2020-08-17 20:08:18</sys_created_on>
        <sys_id>e47a47771be6d05097c0dca0f54bcb03</sys_id>
        <sys_mod_count>361</sys_mod_count>
        <sys_name>GService Category Items CSC</sys_name>
        <sys_package display_value="ITSM Service Portal" source="x_gmeps_itsm_servi">334ae627dbc85c105c1163901496192f</sys_package>
        <sys_policy/>
        <sys_scope display_value="ITSM Service Portal">334ae627dbc85c105c1163901496192f</sys_scope>
        <sys_update_name>sp_widget_e47a47771be6d05097c0dca0f54bcb03</sys_update_name>
        <sys_updated_by>organize.jorge.garcia</sys_updated_by>
        <sys_updated_on>2020-12-18 12:46:13</sys_updated_on>
        <template><![CDATA[<div id="widgetGserviceCategoryItems">
  <h1 ng-if="!c.is_ie" class="category-title">${Serviços de Finanças, Jurídico e Infraestrutura}</h1>
  <div ng-if="!c.is_ie" class="content center">
    <div class="control">
      <div ng-if="data.show_carousel" class="back center" ng-click="c.back()"><img src="GS_Carrosel_ESQ.png"/></div>
      <div ng-if="data.show_carousel" class="next center" ng-click="c.next()"><img src="GS_Carrosel_DIR.png"/></div>
    </div>
    <div class="slide_content_mask">
      <div class="slide_content">
        <div class="item" id="slide{{$index}}"
             ng-repeat="slide in data.slides"
             style="left: {{slide.left}}%; width: {{data.left}}%;"
             ng-click="selectedCategory(slide.sys_id)">
          <div class="item_">
            <img src="{{slide.img}}"/>
            <div class="{{slide.color}}">
              <div class="title">{{slide.title}}</div>
              <div class="description">{{slide.description}}</div>
            </div>
          </div>
        </div>
        <div class="end-space">
      </div>
    </div>
  </div>

  <div class="content_ie" id="widget-category-items" ng-if="c.is_ie">
    <h1 class="category-title">${Serviços de Finanças, Jurídico e Infraestrutura}</h1>
    <div class="category_items">
      <div ng-repeat="item in data.slides" class="categories">
        <div ng-click="selectedCategory(item.sys_id)" class="item_">
          <img src="{{item.img}}" class="icon-img">
          <div class="{{item.color}}">
            <div class="title">{{item.title}}</div>
            <div class="description">{{item.description}}</div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>]]></template>
    </sp_widget>
</record_update>
