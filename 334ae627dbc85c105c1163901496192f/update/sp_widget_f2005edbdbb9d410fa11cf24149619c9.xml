<?xml version="1.0" encoding="UTF-8"?><record_update table="sp_widget">
    <sp_widget action="INSERT_OR_UPDATE">
        <category>custom</category>
        <client_script><![CDATA[function ($scope, $timeout, spUtil, $location, $rootScope) {
	var c = this;
	c.requestComment = '';
	c.requestItem = '';
	c.needComment = false;
	c.needReason = false;
	c.modalMessage = '';
	c.isLoading = true;
	c.reopeningReason = false;
	c.focus = true;

	$scope.loadingIndicator = $rootScope.loadingIndicator;
	//Show widget after loaded
	$scope.$on('sp_loading_indicator', function(e, value) {
		if($scope.loadingIndicator && !value){
			c.isLoading = false;
		}
		$scope.loadingIndicator = value;
	});

	$scope.$on('applyEquipmentFilter', function(event, filters) {
		c.data.filters = filters;
		c.isLoading = true;
		c.data.action = "applyFilter";
		c.server.update().then(function(response){
			c.verifyEmptySearch();
		});
	});

	c.verifyEmptySearch = function(){
		c.data.showFilterClean = true;
		if(c.data.orders.length > 0){
			c.data.showFilterClean = false;
		}
	}

	c.accept = function(index){
		c.data.acceptedOrder = c.data.orders[index];
		if(c.data.acceptedOrder.u_responsible.value == false){
			spUtil.addErrorMessage(c.data.msgs.needAssigned);
		}
		else{
			c.data.action = "changeItemState";
			c.server.update().then(function(response){
				c.verifyEmptySearch();
			});
		}
	}

	c.showDetails = function(index){
		var showDetails = false;
		for(var i in c.data.orders){
			if(i == index){
				c.data.orders[index].showDetails = !c.data.orders[index].showDetails ;
				showDetails = c.data.orders[index].showDetails;
			}
			else
				c.data.orders[i].showDetails = false;
		}
		if(showDetails){
			c.server.get({
				action: 'getTicketConversationWidget',
				order_id: c.data.orders[index].sys_id
			}).then(function(response) {
				c.data.ticketConversationWidget = response.data.ticketConversationWidget;
			});
		}

	}

	c.orderBy = function(order, items){
		c.data.action = "orderBy";
		c.data.order = order;
		c.server.update();
	}

	c.statusColor = function(status){
		var statusClass = '';
		if (status == 2){
			statusClass = 'status_flow_empty';
		} else if (status == true) {
			statusClass = 'status_flow_active';
		} else if (!status) {
			statusClass = 'status_flow_completed';
		}
		return statusClass;
	}

	c.previousPage = function(){
		c.data.actualPage--;
		c.updatePageCount();
	}
	c.nextPage = function(){
		c.data.actualPage++;
		c.updatePageCount();
	}

	c.updatePageCount = function(){
		c.data.window_start = c.data.actualPage * c.data.items_per_page;
		c.data.window_end = c.data.window_start + c.data.items_per_page;
		c.data.action = "changePage";
		c.server.update();
	}
}]]></client_script>
        <controller_as>c</controller_as>
        <css>.transform_title {&#13;
  text-transform: uppercase;&#13;
}&#13;
&#13;
.content_request {&#13;
  margin-bottom: 10px;&#13;
}&#13;
&#13;
.cart-mobile {&#13;
  border: 0;&#13;
  box-shadow: none;&#13;
&#13;
  .cart-header {&#13;
    display: flex;&#13;
    align-items: center;&#13;
    justify-content: space-between;&#13;
    margin-bottom: 20px;&#13;
&#13;
    a {&#13;
      text-align: right;&#13;
      display: block !important;&#13;
    }&#13;
  }&#13;
  .cart-item-mobile-info {&#13;
    display: flex;&#13;
    flex-direction: row;&#13;
    align-items: center;&#13;
    justify-content: space-between;&#13;
    padding: 5px 10px 20px 10px;&#13;
&#13;
    .item-info {&#13;
      display: flex;&#13;
      flex-direction: column;&#13;
    }&#13;
    .item-image {&#13;
      margin: 0;&#13;
    }&#13;
    a {&#13;
      float: none;&#13;
      text-align: center;&#13;
    }&#13;
    select {&#13;
      margin-top: 10px;&#13;
      padding: 0px 5px;&#13;
      text-align-last: center;&#13;
    }&#13;
  }  &#13;
}&#13;
&#13;
td {&#13;
  vertical-align: middle !important;&#13;
}&#13;
&#13;
.a-disabled {&#13;
  cursor: default;&#13;
  color: $btn-link-disabled-color;&#13;
}&#13;
&#13;
.media-body {&#13;
  .btn-link {&#13;
    padding-left: 0;&#13;
    padding-right: 0;&#13;
    color: $primary;&#13;
&#13;
    &amp;:hover {&#13;
      color: darken($primary, 10%);&#13;
    }&#13;
&#13;
    &amp;:focus {&#13;
      color: darken($primary, 10%);&#13;
    }&#13;
  }&#13;
}&#13;
&#13;
.btn-remove {&#13;
  font-size: 18px !important;&#13;
}&#13;
&#13;
.action-btn {&#13;
  display: block;&#13;
  width: 100%;&#13;
  margin-top: 5px;&#13;
&#13;
  &amp;.btn-link {&#13;
    color: $primary;&#13;
  }&#13;
}&#13;
&#13;
.list-group {&#13;
  max-height: 250px;&#13;
  overflow-y: auto;&#13;
}&#13;
&#13;
.list-group-item.ng-enter-active {&#13;
  background-color: #fff;&#13;
}&#13;
&#13;
.empty-cart {&#13;
  font-style: italic;&#13;
  text-align: center;&#13;
  margin-top: 10px;&#13;
  margin-bottom: 7px;&#13;
}&#13;
&#13;
.view-carts-link {&#13;
  text-align: center;&#13;
  display: block;&#13;
}&#13;
&#13;
.order-details-container {&#13;
  display: flex;&#13;
  flex-direction: row;&#13;
  flex-wrap: wrap;&#13;
  margin: 5px 10px 10px 10px;&#13;
&#13;
  .order-details {&#13;
    padding: 5px;&#13;
&#13;
    textarea {&#13;
      resize: none;&#13;
      flex-basis: 100%;&#13;
      flex-shrink: 1;&#13;
      width: 100%;&#13;
      box-sizing: border-box;&#13;
    }&#13;
  }&#13;
&#13;
  .requested-for-details {&#13;
    flex: 1 0 auto;&#13;
    max-width: 100%;&#13;
  }&#13;
  .special-instructions-details {&#13;
    textarea {&#13;
      height: calc(100% - 25px);&#13;
    }&#13;
  }&#13;
}&#13;
&#13;
.item-image {&#13;
  margin-left: auto;&#13;
  margin-right: auto;&#13;
  margin-top: 10px;&#13;
}&#13;
&#13;
.empty-state-content {&#13;
  margin-top: 30px;&#13;
&#13;
  &amp;.small-cart {&#13;
    margin-top: 0px;&#13;
    padding: 10px 20px;&#13;
  }&#13;
&#13;
  .fa-shopping-cart {&#13;
    color: $gray-light;&#13;
    font-size: 80px;&#13;
    display: block;&#13;
    text-align: center;&#13;
&#13;
    &amp;.small-cart {&#13;
      font-size: 40px;&#13;
    }&#13;
  }&#13;
&#13;
  .h3 {&#13;
    text-align: center;&#13;
    margin-bottom: 5px;&#13;
  }&#13;
  .h4 {&#13;
    text-align: center;&#13;
    margin-bottom: 5px;&#13;
  }&#13;
  p {&#13;
    text-align: center;&#13;
    margin-bottom: 20px;&#13;
  }&#13;
&#13;
  .btn {&#13;
    display: block;&#13;
    margin-left: auto;&#13;
    margin-right: auto;&#13;
    width: 300px;&#13;
    max-width: 100%;&#13;
    margin-bottom: 35px;&#13;
  }&#13;
}&#13;
&#13;
.large-checkout {&#13;
  display: inline-block;&#13;
  float: none !important;&#13;
  width: 100%;&#13;
  margin-top: 15px;&#13;
}&#13;
&#13;
.item-row:hover .btn-clear {&#13;
  background-color: #f5f5f5;&#13;
}&#13;
&#13;
.sc-btn {&#13;
  margin-bottom: 10px;&#13;
}&#13;
.sc-btn-group {&#13;
  clear: right;&#13;
}&#13;
&#13;
.sc-remove-btn {&#13;
  &amp;:hover {&#13;
    background-color: $danger;&#13;
    color: #fff;&#13;
    border-color: darken($danger, 10%);&#13;
  }&#13;
}&#13;
&#13;
.btn-group-justified &gt; .btn-group {&#13;
  padding: 0 5px;&#13;
&#13;
  .btn {&#13;
    border-radius: 4px !important;&#13;
    white-space: nowrap;&#13;
    overflow: hidden;&#13;
    text-overflow: ellipsis;&#13;
  }&#13;
}&#13;
&#13;
.cart-table {&#13;
  th {&#13;
    position: sticky;&#13;
    -webkit-position: sticky;&#13;
    top: -1px;&#13;
    z-index: 10;&#13;
    background-color: $panel-bg;&#13;
    box-shadow: 0px 1px 0px $panel-inner-border;&#13;
  }&#13;
}&#13;
&#13;
@media only screen and (max-width : 992px) {&#13;
  .sc-btn, .sc-btn-group {&#13;
    width: 100%;&#13;
  }&#13;
  .item-image {&#13;
    max-width: 70px;&#13;
  }&#13;
}&#13;
&#13;
.without_notification {&#13;
  padding: 30px 0;&#13;
  font-size: 30px;&#13;
}&#13;
&#13;
.content_modal_requests {&#13;
  .modal-body{&#13;
    overflow: auto !important;&#13;
    border: 20px solid white;&#13;
    padding-left: 50px !important;&#13;
    .wrapper-xl {&#13;
      padding: 50px 0 0 50px !important;&#13;
      margin-right: -20px;&#13;
    }&#13;
    button{&#13;
      text-align: right;&#13;
      font-size: 42px;&#13;
    }&#13;
    .justify-text{&#13;
      color: $blue;&#13;
      font-size: 36px;&#13;
      padding-bottom: 15px;&#13;
      margin-bottom: 5px;&#13;
    }&#13;
    .no-text-answer{&#13;
      font-size: 16px;&#13;
      color: lightcoral;&#13;
      padding: 2px;&#13;
    }&#13;
    .form-group{&#13;
      display: flex;&#13;
      flex-direction: column;&#13;
      align-items: flex-end;&#13;
&#13;
      textarea{&#13;
        margin-top: 5px;&#13;
        margin-right: 10% !important;&#13;
        resize: none;&#13;
        overflow: hidden;&#13;
        height: 140px;&#13;
        width: 90%;&#13;
        overflow-wrap: break-word;&#13;
        border: solid 3px $blue;&#13;
      }&#13;
    }&#13;
    .resize-img{&#13;
      height: 70px;&#13;
      margin-top: 25px;&#13;
      margin-left: -110%;&#13;
    }&#13;
  }&#13;
}&#13;
&#13;
/* Custom Checkout */&#13;
.panel {&#13;
  padding: 30px 100px;&#13;
  box-shadow: 0 0 0 0;&#13;
  -webkit-box-shadow: 0 0 0 0;&#13;
}&#13;
&#13;
.survey_accept {&#13;
  .panel {&#13;
    padding: 0 !important;&#13;
  }&#13;
}&#13;
&#13;
/* Table */&#13;
.h3 {&#13;
  font-size: 28px;&#13;
  color: $dodger-blue;&#13;
  margin-top: 20px !important;&#13;
  margin-bottom: 30px;&#13;
}&#13;
.b-b {&#13;
  border-bottom: 2px solid $slate-gray;&#13;
}&#13;
.b-t {&#13;
  border: 0;&#13;
}&#13;
thead {&#13;
  color: $slate-gray;&#13;
  font-family: $text-bolder;&#13;
  font-size: 13px;&#13;
}&#13;
.table &gt; thead &gt; tr &gt; th {&#13;
  border: 0;&#13;
  vertical-align: middle;&#13;
}&#13;
.table-hover &gt; tbody &gt; tr:hover {&#13;
  background-color: white;&#13;
}&#13;
tbody {&#13;
  img {&#13;
    width: 50px;&#13;
    height: 50px;&#13;
  }&#13;
&#13;
  td:nth-child(1) {&#13;
    /*width: 20%;*/&#13;
    padding: 20px;&#13;
  }&#13;
&#13;
  td:nth-child(2) {&#13;
    /*width: 20%;*/&#13;
    padding: 20px;&#13;
  }&#13;
&#13;
  td:nth-child(3) {&#13;
    /*width: 25%;*/&#13;
    padding: 20px;&#13;
  }&#13;
&#13;
  td:nth-child(4) {&#13;
    /*width: 5%;*/&#13;
    padding: 20px;&#13;
  }&#13;
&#13;
  td:nth-child(5) {&#13;
    /*width: 30%;*/&#13;
    padding: 20px;&#13;
&#13;
    .request_button {&#13;
      margin-right: 50px;&#13;
    }&#13;
  }&#13;
  &#13;
  td:nth-child(6) {&#13;
    padding: 20px;&#13;
  }&#13;
  &#13;
  td:nth-child(7) {&#13;
    padding: 20px;&#13;
  }&#13;
  &#13;
  .status_display_inherit{&#13;
    display: inherit;&#13;
  }&#13;
&#13;
}&#13;
&#13;
/* PAGE 1 - My Requests */&#13;
.content_my_requests {&#13;
  .buttons {&#13;
    position: relative;&#13;
&#13;
    &amp;:hover {&#13;
      .tooltip {&#13;
        visibility: visible;&#13;
        opacity: 1;&#13;
      }&#13;
    }&#13;
    .tooltip_right {&#13;
      top: calc(50% - 15px);&#13;
      left: 60px;&#13;
    }&#13;
    .tooltip_bottom {&#13;
      bottom: -41px;&#13;
      left: -2px;&#13;
    }&#13;
    .arrow_bottom {&#13;
      position: absolute !important;&#13;
      top: 27px !important;&#13;
    }&#13;
  }&#13;
}&#13;
.center-loading {&#13;
  position: relative;&#13;
  left: 50%;&#13;
  .sp-loading-indicator{&#13;
    color: $blue !important;&#13;
  }&#13;
}&#13;
&#13;
.filter-padding{&#13;
  padding: 10px 0 !important;&#13;
}&#13;
&#13;
.thead_myrequests {&#13;
  border-top: 2px solid $slate-gray;&#13;
}&#13;
.column_product {&#13;
  .number_text {&#13;
    text-transform: uppercase;&#13;
  }&#13;
  .item_text {&#13;
    font-family: $text-bold;&#13;
    font-size: 18px;&#13;
    line-height: 1;&#13;
  }&#13;
  .follow_up_properties{&#13;
    font-size: 10px;&#13;
    font-weight: bold;&#13;
    font-weight: bold;&#13;
    text-transform: uppercase;&#13;
    color: $blue;&#13;
  }&#13;
  .more_detail {&#13;
    text-decoration: underline;&#13;
    text-transform: lowercase;&#13;
    font-size: 12px;&#13;
  }&#13;
}&#13;
.column_status {&#13;
  .service_title {&#13;
    text-transform: uppercase;&#13;
    font-family: $text-bold;&#13;
    font-size: 12px;&#13;
  }&#13;
  .state_orange {&#13;
    color: $coral !important;&#13;
  }&#13;
  .state_blue {&#13;
    color: $blue;&#13;
  }&#13;
}&#13;
.column_opened {&#13;
  .item_opened {&#13;
    font-size: 12px;&#13;
  }&#13;
}&#13;
.column_sla {&#13;
  .sla_description {&#13;
    font-size: 12px;&#13;
  }&#13;
  .assigned_to_filter{&#13;
    .select2-container .select2-choice{&#13;
      border: 0;&#13;
      text-align: center;&#13;
      border-bottom: 2px solid $slate-gray;&#13;
    }&#13;
    .select2-container .select2-choice .select2-arrow{&#13;
      border-left: 0;&#13;
    }&#13;
    .select2-container .select2-choice .select2-arrow b {&#13;
      background-size: 15px !important;&#13;
      position: absolute;&#13;
      top: 10px;&#13;
      background: url(gservice_column_dashboard_arrow.png) no-repeat 6px 4px;&#13;
    }&#13;
    select {&#13;
      border: 0;&#13;
      width: 100%;&#13;
      border-bottom: 2px solid $blue;&#13;
      padding: 5px 0;&#13;
    }&#13;
  }&#13;
}&#13;
.column_buttons {&#13;
  display: flex;&#13;
  border: 0;&#13;
&#13;
  img {&#13;
    width: 50px;&#13;
    height: 50px;&#13;
    margin-right: 20px !important;&#13;
  }&#13;
  img:last-child {&#13;
    margin-right: 0 !important;&#13;
  }&#13;
}&#13;
.process_flow {&#13;
  position: relative;&#13;
&#13;
  .process_flow_title {&#13;
    text-transform: uppercase;&#13;
    font-family: $text-bolder;&#13;
    margin-bottom: 20px;&#13;
  }&#13;
  .line_flow {&#13;
    background-color: $slate-gray;&#13;
    width: 2px;&#13;
    height: 70%;&#13;
    left: 29px;&#13;
    z-index: 1;&#13;
    position: absolute;&#13;
  } &#13;
  .items_flow {&#13;
    text-transform: uppercase;&#13;
    font-family: $text-bolder;&#13;
    margin-bottom: 20px;&#13;
    display: flex;&#13;
    align-items: center;&#13;
    z-index: 2;&#13;
    position: inherit;&#13;
&#13;
    .status_flow {&#13;
      width: 30px;&#13;
      height: 30px;&#13;
      font-size: 18px;&#13;
      border-radius: 15px;&#13;
      display: flex;&#13;
      justify-content: center;&#13;
      align-items: center;&#13;
      margin-right: 15px;&#13;
    }&#13;
    .status_flow_completed {&#13;
      color: white;&#13;
      background-color: $slate-gray;&#13;
    }&#13;
    .status_flow_active {&#13;
      color: white;&#13;
      background-color: $blue;&#13;
    }&#13;
    .status_flow_empty {&#13;
      color: $slate-gray;&#13;
      background-color: white;&#13;
      border: 2px solid $slate-gray;&#13;
    }&#13;
    .status_active {&#13;
      color: $blue;&#13;
    }&#13;
  }&#13;
}&#13;
&#13;
/* PAGE 2 - Notifications */&#13;
.content_notification {&#13;
  .header_message {&#13;
    padding: 20px 0;&#13;
    font-family: $text-bold;&#13;
    font-size: 18px;&#13;
    line-height: 1;&#13;
    border-bottom: 2px solid $blue;&#13;
  }&#13;
  .widget_notifications {&#13;
    overflow: auto;&#13;
&#13;
    .border-notification {&#13;
      padding: 20px 0;&#13;
      border-bottom: 2px solid $slate-gray;&#13;
    }&#13;
  }&#13;
&#13;
  .close {&#13;
    font-size: 36px;&#13;
    font-family: $text-light;&#13;
    margin-right: 20px;&#13;
    margin-top: 15px;&#13;
  }&#13;
  .modal-body {&#13;
    padding: 60px 100px;&#13;
&#13;
    .modal-title {&#13;
      color: $blue;&#13;
      font-size: 30px;&#13;
    }&#13;
    .modal-description {&#13;
      font-size: 24px;&#13;
      font-family: $text-bold;&#13;
    }&#13;
  }&#13;
  .form-control {&#13;
    width: 329px !important;&#13;
  }&#13;
}&#13;
&#13;
/* PAGE 3 - APPROVALS */&#13;
.approval_content {&#13;
  .approval_column_title{&#13;
    h4 {&#13;
      margin: 4px 0 0 0 !important;&#13;
    }&#13;
    .approval_number{&#13;
      font-size: 16px;&#13;
    }&#13;
    .approval_title{&#13;
      font-family: $text-bold;&#13;
    }&#13;
    .approval_more-details{&#13;
      font-size: 12px;&#13;
      text-decoration: underline;&#13;
      color: $slate-gray;&#13;
      cursor: pointer;&#13;
    }&#13;
  }&#13;
  .approval_column_requester{&#13;
    padding-left: 10px !important;&#13;
    .info-size{&#13;
      height: 20px;&#13;
      width: 20px;&#13;
      margin-left: 10px;&#13;
      margin-top: -5px;&#13;
      cursor: pointer;&#13;
    }&#13;
  }&#13;
  .approval_column_opened{&#13;
    padding-left: 20px !important;&#13;
&#13;
  }&#13;
  .approval_column_forecast{&#13;
    padding-left: 12px !important;&#13;
&#13;
  }&#13;
  .approvals-buttons {&#13;
    .submit-button {&#13;
      margin-left: 20px;&#13;
    }&#13;
    .cancel-button {&#13;
      margin-left: 15%;;&#13;
    }&#13;
  }&#13;
  .modal-body {&#13;
    overflow: hidden !important;&#13;
    border: 20px solid white;&#13;
    padding-left: 50px !important;&#13;
    .wrapper-xl {&#13;
      padding: 50px 0 0 50px !important;&#13;
      margin-right: -20px;&#13;
    }&#13;
    button {&#13;
      text-align: right;&#13;
      font-size: 42px;&#13;
    }&#13;
    .justify-text {&#13;
      color: $blue;&#13;
      font-size: 36px;&#13;
      padding-bottom: 15px;&#13;
      margin-bottom: 5px;&#13;
    }&#13;
    .no-text-answer {&#13;
      font-size: 16px;&#13;
      color: lightcoral;&#13;
      padding: 2px;&#13;
    }&#13;
    .form-group {&#13;
      display: flex;&#13;
      flex-direction: column;&#13;
      align-items: flex-end;&#13;
      &#13;
      textarea {&#13;
        margin-top: 5px;&#13;
        margin-right: 10% !important;&#13;
        resize: none;&#13;
        overflow: hidden;&#13;
        height: 140px;&#13;
        width: 90%;&#13;
        overflow-wrap: break-word;&#13;
        border: solid 3px $blue;&#13;
      }&#13;
    }&#13;
    .resize-img{&#13;
      height: 70px;&#13;
      margin-top: 25px;&#13;
      margin-left: -110%;&#13;
    }&#13;
  }&#13;
}&#13;
&#13;
/* PAGE 4 */&#13;
.assets_content {&#13;
  .column_name {&#13;
    .asset_name {&#13;
      font-size: 18px;&#13;
      font-family: $text-bold;&#13;
    }&#13;
  }&#13;
  .service_title {&#13;
    font-size: 12px;&#13;
    color: $slate-gray;&#13;
  }&#13;
}&#13;
&#13;
/* PAGE 5 */&#13;
.page_description {&#13;
  border-bottom: 2px solid $slate-gray;&#13;
  padding: 20px;&#13;
  font-family: $text-bold;&#13;
  font-size: 16px;&#13;
  line-height: 1;&#13;
}&#13;
.column_category {&#13;
  text-align: center;&#13;
&#13;
  h4 {&#13;
    text-transform: uppercase;&#13;
    font-size: 14px;&#13;
    font-family: $text-bolder;&#13;
    color: $dodger-blue;&#13;
    width: 130px;&#13;
    margin: 0 auto;&#13;
    margin-top: 5px;&#13;
  }&#13;
}&#13;
.column_service {&#13;
  color: $dodger-blue;&#13;
&#13;
  .service_title {&#13;
    font-size: 12px;&#13;
    text-transform: uppercase;&#13;
  }&#13;
  .service_description {&#13;
    font-size: 14px;&#13;
    font-weight: bold;&#13;
  }&#13;
}&#13;
.column_description {&#13;
  .description {&#13;
    font-size: 12px;&#13;
  }&#13;
}&#13;
.column_sla {&#13;
  .sla_text {&#13;
    font-size: 12px;&#13;
  }&#13;
}&#13;
&#13;
.content_pagination {&#13;
  .pag_arrow_left {&#13;
    img {&#13;
      transform: rotate(90deg);&#13;
    }&#13;
  }&#13;
  .pag_arrow_right {&#13;
    img {&#13;
      margin-left: 25px;&#13;
      transform: rotate(-90deg);&#13;
    }&#13;
  }&#13;
  .pag_arrow_left, .pag_arrow_right {&#13;
    img {&#13;
      height: 14px;&#13;
      margin-top: -4px;&#13;
    }&#13;
  }&#13;
  .pag_text {&#13;
    font-family: $text-bold;&#13;
    text-transform: uppercase;&#13;
    margin-left: 25px;&#13;
  }&#13;
}&#13;
&#13;
&#13;
.footer_checkout {&#13;
&#13;
  .continue_shopping {&#13;
    color: $slate-gray;&#13;
    font-size: 10px;&#13;
    font-weight: bold;&#13;
    text-decoration: underline;&#13;
    text-transform: uppercase;&#13;
    padding: 20px 0 !important;&#13;
  }&#13;
&#13;
  .submit_button {&#13;
    .submit_button_content {&#13;
      display: flex;&#13;
      align-items: center;&#13;
&#13;
      .submit_img {&#13;
        width: 50px;&#13;
        height: 50px;&#13;
        margin-right: 5px;&#13;
      }&#13;
      .submit_title {&#13;
        font-size: 20px;&#13;
        font-weight: bold;&#13;
        line-height: 1;&#13;
        color: $dodger-blue;&#13;
        width: 90px;&#13;
      }&#13;
    }&#13;
  }&#13;
}&#13;
&#13;
.empty_content {&#13;
  background-color: white;&#13;
  padding: 30px 100px;&#13;
  padding-bottom: 330px;&#13;
  font-size: 30px;&#13;
&#13;
  .empty_title {&#13;
    color: $dodger-blue;&#13;
    margin-bottom: 30px;&#13;
  }&#13;
}&#13;
&#13;
.column_content {&#13;
  img {&#13;
    height: 10px;&#13;
    position: relative;&#13;
    top: -2px;&#13;
    right: -2px;&#13;
  }&#13;
  .invert-arrow{&#13;
    transform: rotateX(180deg);&#13;
  }&#13;
}&#13;
&#13;
.content_conversation {&#13;
  width: 100%;&#13;
}&#13;
&#13;
.activity_content {&#13;
  overflow: scroll !important;&#13;
  border-bottom: 1px solid $light-steel-blue;&#13;
}&#13;
&#13;
/* Custom Select box */&#13;
.custom_select_box {&#13;
  position: relative;&#13;
  text-align: center;&#13;
  font-family: $text-bold;&#13;
&#13;
&#13;
  img {&#13;
    width: 16px;&#13;
    height: 10px;&#13;
    position: absolute;&#13;
    top: 11px;&#13;
    right: 8px;&#13;
  }&#13;
&#13;
  .item {&#13;
    background-color: white;&#13;
    padding: 5px 10px;&#13;
    text-transform: uppercase;&#13;
&#13;
    &amp;:hover {&#13;
      color: white;&#13;
      background-color: $slate-gray;&#13;
    }&#13;
  }&#13;
  .selected_item {&#13;
    padding: 5px 25px;&#13;
    border-bottom: 2px solid $slate-gray;&#13;
    text-transform: uppercase;&#13;
&#13;
    img {&#13;
      top: calc(50% - 5px);&#13;
    }&#13;
  }&#13;
&#13;
  .select_content {&#13;
    position: absolute;&#13;
    top: 28px;&#13;
    z-index: 2;&#13;
    width: 100%;&#13;
    box-shadow: 0 2px 5px $light-steel-blue;&#13;
    margin-left: 0 !important;&#13;
&#13;
    .dropdown-style {&#13;
      input {&#13;
        width: 100%;&#13;
        border-radius: 0;&#13;
        border: 0;&#13;
        border: 1px solid $slate-gray;&#13;
        text-align: center;&#13;
        text-transform: uppercase;&#13;
        padding: 5px;&#13;
      }&#13;
    }&#13;
    .content_items {&#13;
      max-height: 200px;&#13;
      overflow: auto;&#13;
    }&#13;
  }&#13;
&#13;
  .select_close {&#13;
    opacity: 0;&#13;
  }&#13;
  .select_open {&#13;
    opacity: 1;&#13;
  }&#13;
}&#13;
&#13;
input:focus::placeholder{&#13;
  color: transparent;&#13;
}&#13;
&#13;
.select2-search-choice-close {&#13;
  right: 22px !important;&#13;
}&#13;
&#13;
.owner_column {&#13;
  .select2-arrow {&#13;
    background: url(gservice_column_dashboard_arrow.png);&#13;
    background-repeat: no-repeat;&#13;
    background-position: 10px;&#13;
    background-size: 18px;&#13;
    &#13;
    b {&#13;
      display: none;&#13;
    }&#13;
  }&#13;
}</css>
        <data_table>sp_instance</data_table>
        <demo_data/>
        <description/>
        <docs/>
        <field_list/>
        <has_preview>false</has_preview>
        <id>gservice_equipment_list</id>
        <internal>false</internal>
        <link/>
        <name>GService Equipment List</name>
        <option_schema>[{"hint":"Selects the columns to show on the table","name":"table","section":"Presentation","label":"Table","type":"string"},{"name":"table_template","section":"Behavior","label":"Table Template","type":"string"}]</option_schema>
        <public>false</public>
        <roles/>
        <script><![CDATA[(function() {
	data.uri = gs.getProperty('glide.servlet.uri');
	data.taskQuery = "state=-5^u_pending_reason=1^request_item.opened_by=" + gs.getUserID();
	data.incidentQuery = "state=3^hold_reason=1^opened_by=" + gs.getUserID();
	var localInput = input; //to safeguard pullution of "input" via BR or other scripts
	var equipmentsUtils = new global.OCLPortalEquipmentsUtil();
	data.requestsID = '';
	data.showEmptyMessage = false;

	data.show_survey = false;

	data.msgs = {};
	data.msgs.needAssigned = gs.getMessage("Necessário selecionar um responsável antes de aceitar movimentação.");

	data.user_query = gs.getProperty("gservice_order_user_query");

	data.statusFlow = [];
	var statusFlow = gs.getProperty("gservice_list_filters_status").split("|");
	for(var i in statusFlow){
		statusFlow[i].number = i + 1;
		statusFlow[i].selected = false;
		data.statusFlow.push(JSON.parse(statusFlow[i]));
	}

	//Used to get the current user sys_id
	var userID = gs.getUser().getID();
	data.user_id = userID;
	//Get the columns (from property) to show upside the requests
	data.columns = [];

	if(!localInput){
		data.equipmentFilter_widget = $sp.getWidget('gservice_equipment_filter');
		data.filters = {};
		data.filters.locationFilter = equipmentsUtils.getLocationFilter();
		data.filters.areaFilter = equipmentsUtils.getAreaFilter();
		data.orders = [];
		prepareDefaultList();
		data.showEmptyMessage = true;
	}
	else{
		switch(localInput.action){
			case "applyFilter":
				preparePages();
				data.filters = localInput.filters;
				prepareDefaultList();
				break;

			case "changeItemState":
				equipmentsUtils.acceptOrder(localInput.acceptedOrder);
				preparePages();
				data.items_per_page = localInput.items_per_page;
				data.actualPage = localInput.actualPage;
				data.window_start = localInput.window_start;
				data.window_end = localInput.window_end;
				data.query = localInput.query;
				data.columns = localInput.columns;
				data.order = localInput.order;
				data.direction = localInput.direction;
				data.orders = equipmentsUtils.getOrders(data.query, data.window_start, data.window_end, data.order, data.direction);
				prepareCount();
				break;
			case "getTicketConversationWidget":
				var gservice_ticket_conversation_options = {table : "wm_order",
																										sys_id : localInput.order_id,
																										item_status : "",
																										hide_new_comments : true};
				data.ticketConversationWidget = $sp.getWidget('gservice_custom_conversation', gservice_ticket_conversation_options);
				break;
			case "orderBy":
				preparePages();
				data.order = localInput.order;
				data.columns = localInput.columns;
				prepareOrderBy();

				data.query = localInput.query;
				data.orders = equipmentsUtils.getOrders(data.query, data.window_start, data.window_end, data.order, data.direction);
				prepareCount();
				break;
			case "changePage":
				data.items_per_page = localInput.items_per_page;
				data.actualPage = localInput.actualPage;
				data.window_start = localInput.window_start;
				data.window_end = localInput.window_end;
				data.query = localInput.query;
				data.columns = localInput.columns;
				data.order = localInput.order;
				data.direction = localInput.direction;
				data.orders = equipmentsUtils.getOrders(data.query, data.window_start, data.window_end, data.order, data.direction);
				prepareCount();
				break;
		}
	}

	function prepareDefaultList(){
		preparePages();
		prepareColumns();

		data.query = equipmentsUtils.mountQuery(data.filters.locationFilter, data.filters.areaFilter);
		data.orders = equipmentsUtils.getOrders(data.query, data.window_start, data.window_end);
		if(data.orders.length == 0){
			data.showEmptyMessage = true;
		}
		prepareCount();
	}

	function preparePages(){
		data.items_per_page = 6;
		data.actualPage = 0;

		data.window_start = 0;
		data.window_end = 6;
	}

	function prepareColumns(){
		//You need to select the columns name on the property
		//Using checkout as a test, but it`ll change to a dinamic way when you call the widget you send the option
		var columns_property = gs.getProperty("gservice_equipments_columns");

		var columns = JSON.parse(columns_property);

		data.columns = columns;
		for(var i in columns){
			data.columns[i].name = gs.getMessage(columns[i].name);
		}
	}

	function prepareOrderBy(){
		for(var i in data.columns){
			if(data.order == data.columns[i].order){
				data.columns[i].direction = !data.columns[i].direction ? -1 : -data.columns[i].direction;
				data.direction = data.columns[i].direction;
			}
			else{
				data.columns[i].direction = false;
			}
		}
	}

	function prepareCount(){
		data.actualPageCount = data.actualPage + 1;
		data.actualItemsCount = data.items_per_page * data.actualPageCount;
		data.requestsID = 'sys_idIN';
		data.totalItems = equipmentsUtils.getTotalOrders(data.query);
		data.actualItemsCount = data.items_per_page * data.actualPageCount;
		if(data.actualItemsCount > data.totalItems){
			data.actualItemsCount = data.totalItems;
		}
	}
})();]]></script>
        <servicenow>false</servicenow>
        <sys_class_name>sp_widget</sys_class_name>
        <sys_created_by>organize.fernando</sys_created_by>
        <sys_created_on>2020-07-09 19:49:04</sys_created_on>
        <sys_id>f2005edbdbb9d410fa11cf24149619c9</sys_id>
        <sys_mod_count>394</sys_mod_count>
        <sys_name>GService Equipment List</sys_name>
        <sys_package display_value="ITSM Service Portal" source="x_gmeps_itsm_servi">334ae627dbc85c105c1163901496192f</sys_package>
        <sys_policy/>
        <sys_scope display_value="ITSM Service Portal">334ae627dbc85c105c1163901496192f</sys_scope>
        <sys_update_name>sp_widget_f2005edbdbb9d410fa11cf24149619c9</sys_update_name>
        <sys_updated_by>tfesilva</sys_updated_by>
        <sys_updated_on>2020-10-09 22:04:09</sys_updated_on>
        <template><![CDATA[<div class="content_request">
  <div class="col-md-12 filter-padding">
    <sp-widget widget="data.equipmentFilter_widget"></sp-widget>
  </div>

  <div ng-if="data.showFilterClean" class="without_notification">
    ${Ops! Não encontramos resultados para essa busca.}
  </div>

  <div ng-if="!data.showFilterClean" class="content_my_requests">
    <div>
      <table class="table table-hover b-t table-condensed cart-table">

        <div class="center-loading">
          <div class="col-md-12" ng-show="c.isLoading">
            <div class="hidden-xs sp-loading-indicator" ng-if="loadingIndicator">
              <div></div>
              <div></div>
              <div></div>
            </div>
          </div>
        </div>

        <thead ng-show="!c.isLoading" class="thead_myrequests" id="list-columns">
          <tr>
            <th class="col-lg-2 wrapper column_content" ng-repeat="column in data.columns">
              <div class="transform_title" ng-click="c.orderBy(column.order, data.requests)">
                {{column.name}}
                <span ng-if="column.order">
                  <span ng-if="!column.direction"></span>
                  <span ng-if="column.direction"><img src="gservice_column_dashboard_arrow.png" ng-class="column.direction == 1 ? 'invert-arrow' : ''"/></span>
                </span>
              </div>
            </th>
          </tr>
        </thead>

        <tbody id="items-content" ng-show="!c.isLoading" ng-repeat="order in data.orders">
          <!-- Requests Init -->
          <tr class="item-row b-b">
            <td data-th="Product" class="column_product">
              <div>
                <div>
                  <div class="number_text"> <a ng-href="{{uri}}wm_order.do?sys_id={{order.sys_id}}" target="_blank">#{{order.number}}</a></div>
                  <div class="item_text">{{order.description}}</div>
                </div>
              </div>
            </td>
            <td class="column_status">
              <div class="row status_display_inherit">
                <div>
                  <div class="service_title {{order.colorClass}}">{{order.state}}</div>
                </div>
              </div>
            </td>
            <td class="column_opened">
              <div class="item_opened">{{order.ci}}</div>
            </td>
            <td class="column_opened">
              <div class="item_opened">{{order.assignment_group}}</div>
            </td>
            <td class="column_opened">
              <div class="item_opened">{{order.location}}</div>
            </td>
            <td class="column_sla">
              <div class="assigned_to_filter owner_column">
                <sn-record-picker field="order.u_responsible" table="'sys_user'" display-field="'name'" value-field="'sys_id'" default-query="data.user_query" search-fields="'name'" page-size="50"></sn-record-picker>
              </div>
            </td>
            <td class="column_buttons">
              <div class="buttons" ng-click="c.accept($index)">
                <img src="gservice_dashboard_confirm.png"/>
                <span class="tooltip tooltip_bottom">
                  <div class="tooltip_arrow arrow_top"></div>
                  <div class="tooltip_text">${Aceitar}</div>
                </span>
              </div>
            </td>
          </tr>
        </tbody>
      </table>

      <div class="content_pagination">
        <span class="pag_arrow_left" ng-click="c.previousPage()" ng-if="data.actualPage > 0"><img src="gservice_column_dashboard_arrow.png"/></span>
        <span class="pag_arrow_right" ng-click="c.nextPage()" ng-if="data.actualItemsCount < data.totalItems"><img src="gservice_column_dashboard_arrow.png"/></span>
        <span class="pag_text">Página {{data.actualPageCount}} - {{data.actualItemsCount}} de {{data.totalItems}} RESULTADOS</span>
      </div>
    </div>
  </div>

  <now-message key="Done" value="${Done}"/>
</div>]]></template>
    </sp_widget>
</record_update>
